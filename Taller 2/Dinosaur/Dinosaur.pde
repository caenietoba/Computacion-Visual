PImage tex;

void setup() {
  size(640, 360, P3D);
  tex = loadImage("dinosaur.png");
  textureMode(NORMAL);
  fill(255);
}

void draw() {
  background(0);
  camera(mouseX, mouseY, (height/2.0) / tan(PI*30.0 / 180.0), width/2.0 - 50, height/2.0 + 50, 0, 0, 1, 0);
  noStroke();
  //stroke(255);
  strokeWeight(0.01);
  translate(width/2.0 - 50, height/2.0 - 50, -100);
  scale(190);
  rotateY(-PI/6);
  Body(tex);
  Tail(tex);
  Head(tex);
}

void Body(PImage tex) {
  beginShape();
  texture(tex);
  
  vertex( 0.439, 0.531,  map(0.531, 0, 1, 0.650, 1), 0.439, 0.531);
  vertex( 0.336, 0.497,  map(0.497, 0, 1, 0.650, 1), 0.336, 0.497);
  vertex( 0.207, 0.529,  map(0.529, 0, 1, 0.650, 1), 0.207, 0.529);  
  vertex( 0.184, 0.432,  map(0.432, 0, 1, 0.650, 1), 0.184, 0.432);
  vertex( 0.360, 0.341,  map(0.341, 0, 1, 0.650, 1), 0.360, 0.341);
  vertex( 0.381, 0.233,  map(0.233, 0, 1, 0.650, 1), 0.381, 0.233);  
  vertex( 0.539, 0.191,  map(0.191, 0, 1, 0.650, 1), 0.539, 0.191);
  vertex( 0.553, 0.379,  map(0.379, 0, 1, 0.650, 1), 0.553, 0.379);
  vertex( 0.712,     1,  map(    1, 0, 1, 0.650, 1), 0.712,     1);
  vertex( 0.315,     1,  map(    1, 0, 1, 0.650, 1), 0.315,     1);

  endShape(CLOSE);
}

void Tail(PImage tex) {
  beginShape();
  texture(tex);

  vertex( 0.553, 0.379, map(0.379, 0, 1, 0.650, 1), 0.553, 0.379);
  vertex( 0.712,     1,     1, 0.712,     1);
  vertex( 0.720,     1, 0.550,     1, 0.776);
  vertex( 0.680, 0.741, 0.580, 0.928, 0.641);
  vertex( 0.659, 0.635, 0.630, 0.819, 0.535);
  vertex( 0.619, 0.520, 0.700, 0.649, 0.420);

  endShape(CLOSE);
}

void Head(PImage tex){
  beginShape(QUADS);
  texture(tex);
  
  vertex( 0.207, 0.529,  map(0.529, 0, 1, 0.650, 1), 0.012, 0.304);
  vertex( 0.197, 0.499,  map(0.529, 0, 1, 0.650, 1) + 0.375,     0, 0.062);
  vertex( 0.174, 0.402,  map(0.432, 0, 1, 0.650, 1) + 0.375, 0.080, 0.049);
  vertex( 0.184, 0.432,  map(0.432, 0, 1, 0.650, 1), 0.101, 0.285);
  
  vertex( 0.184, 0.432,  map(0.432, 0, 1, 0.650, 1), 0.101, 0.285);
  vertex( 0.174, 0.402,  map(0.432, 0, 1, 0.650, 1) + 0.375, 0.080, 0.049);
  vertex( 0.350, 0.311,  map(0.341, 0, 1, 0.650, 1) + 0.375, 0.266, 0.029);
  vertex( 0.360, 0.341,  map(0.341, 0, 1, 0.650, 1), 0.287, 0.251);
  
  vertex( 0.360, 0.341,  map(0.341, 0, 1, 0.650, 1), 0.287, 0.251);
  vertex( 0.350, 0.311,  map(0.341, 0, 1, 0.650, 1) + 0.375, 0.266, 0.029);
  vertex( 0.371, 0.203,  map(0.233, 0, 1, 0.650, 1) + 0.375, 0.380,     0);
  vertex( 0.381, 0.233,  map(0.233, 0, 1, 0.650, 1), 0.381, 0.233);
  
  vertex( 0.381, 0.233,  map(0.233, 0, 1, 0.650, 1), 0.381, 0.233);
  vertex( 0.371, 0.203,  map(0.233, 0, 1, 0.650, 1) + 0.375, 0.380,     0);
  vertex( 0.529, 0.161,  map(0.191, 0, 1, 0.650, 1) + 0.375, 0.528,     0);
  vertex( 0.539, 0.191,  map(0.191, 0, 1, 0.650, 1), 0.539, 0.191);
  
  endShape();
}
